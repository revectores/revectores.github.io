<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title> Python Library `cppimport`
 </title>
  <link rel="stylesheet" type="text/css" href="http://revectores.com/static/css/newsprint.css"> 
  <link rel="stylesheet" type="text/css" href="http://revectores.com/static/css/blog.css"> 
  <link rel="stylesheet" type="text/css" href="http://revectores.com/static/css/code.css"> 
</head>
<body>

<p><a href="../"><< plib_ext</a></p>

<h1 id="python-library-cppimport">Python Library <code>cppimport</code></h1>
<h3 id="cppimport-introduction"><code>cppimport</code> Introduction</h3>
<h5 id="core-workflow">Core Workflow</h5>
<p><code>cppimport</code> is a python library used to connect to C++ extensions.</p>
<p>Here we use file <a href="__src_plib_cppimport_demo/somecode.cpp"><code>somecode.cpp</code></a> and the Python interactive shell to demonstrate this:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a><span class="pp">#include </span><span class="im">&lt;pybind11/pybind11.h&gt;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true"></a><span class="kw">namespace</span> py = pybind11;</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true"></a><span class="dt">int</span> square(<span class="dt">int</span> x) {</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true"></a>    <span class="cf">return</span> x * x;</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true"></a>}</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true"></a>PYBIND11_MODULE(somecode, m){</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true"></a>    m.def(<span class="st">&quot;square&quot;</span>, &amp;square);</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true"></a>}</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true"></a><span class="co">/*</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true"></a><span class="co">&lt;%</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true"></a><span class="co">setup_pybind11(cfg)</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true"></a><span class="co">%&gt;</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true"></a><span class="co">*/</span></span></code></pre></div>
<p>and run:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> <span class="im">import</span> cppimport</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> somecode <span class="op">=</span> cppimport.imp(<span class="st">&quot;somecode&quot;</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> somecode.square(<span class="dv">9</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true"></a><span class="dv">81</span></span></code></pre></div>
<p>We can even import the C++ code like normal Python library, by adding <code>// cppimport</code> on the <strong>first</strong> line of C++ file. Then</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> <span class="im">import</span> cppimport.import_hook</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> <span class="im">import</span> somecode</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> somecode.square(<span class="dv">9</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true"></a><span class="dv">81</span></span></code></pre></div>


</body>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</html>